\subsection{Sets}
\begin{definition}\ \\
Given a non-empty set $E$, and $\Es$ a collection of subsets of $E$ is an algebra (means $\emp,E \in \Es$) which is closed under finite unions and intersections. Then we say $\Es$ is a $\sigma$-algebra if it is closed under countable set operations, i.e.
\begin{itemize}
    \item $A \in \Es$ $\Rightarrow$ $A^c = E \setminus A \in \Es$.
    \item $A_1, A_2,\dots \in \Es$ $\Rightarrow$ $\cup_{n=1}^\infty A_n \in \Es$.
\end{itemize}
\end{definition}
\begin{remark}\ \\
In the note, two notations will be used:
\begin{itemize}
    \item Given a collection $\Cs \subset \Ps(E)$, $\sigma(\Cs)$ denotes the \underline{smallest} $\sigma$-algebra containing $\Cs$.
    \item The \underline{Borel $\sigma$-algebra} will be denoted by $\sigma(\text{open sets})$.
\end{itemize}
\end{remark}

\begin{definition}[\textbf{p-system} or \textbf{$\bm \pi$-system}]\ \\
A \underline{$\pi$-system} on a set $\Omega$ is a collection $\Ps \subset \Ps(\Omega)$ such that
\begin{itemize}
    \item $\Ps$ is non-empty.
    \item For any $A,B \in \Ps$, $A \cap B \in \Ps$.
\end{itemize}
\end{definition}

\begin{definition}[\textbf{$\bm \lambda$-system} or \textbf{Dynkin-system} or \textbf{d-system}]\ \\
A collection $\Ds \subset \Ps(\Omega)$ is a \underline{$\lambda$-system} on a set $\Omega$ if
\begin{itemize}
    \item $\Omega \in \Ds$.
    \item For $A,B \in \Ds$ s.t. $A \supset B$, we have $A \setminus B \in \Ds$. (closure under set minus)
    \item $(A_n) \in \Ds$ s.t. $A_n \uparrow A$, then $A \in \Ds$. (closure under countable increasing unions)
\end{itemize}
\end{definition}
\begin{remark}
It can be checked that $\lambda$-system is equivalent to the \textit{Monotone Class}.
\end{remark}

\vspace{3pt}
\begin{proposition}\label{1.4}\ \\
A collection $\Es$ of subsets of $E$ is a $\sigma$-algebra \underline{if.f} it is a \underline{d-system} and a \underline{p-system}.
\end{proposition}
\begin{proof}\ 
\begin{itemize}
    \item $\Rightarrow:$ This direction follows the definition directly.
    \item $\Leftarrow:$ We check the definition for $\sigma$-algebra:
    \begin{itemize}
        \item From the definition of \underline{$\lambda$-system} $\emp, E \subset \Es$.
        \item For $A_1,A_2,\dots \in \Es$, we set $B_1 = A_1, B_2 = A_1 \cup A_2, B_3 = B_2 \cup A_3, \dots$ so that $(B_n)$ is increasing, and thus $A = \lim_n A_n = \lim_n B_n \in \Es$ by (3) of \underline{$\lambda$-system}.
        \item $E,A \in \Es$ and $E \supset A$ so that $A^c = E \setminus A \in \ep$.
    \end{itemize}
\end{itemize}
\end{proof}

\begin{lemma}\label{1.5}\ \\
Let $\Ds$ be a \underline{d-system}. Fix $D \in \Ds$, and define
\begin{equation*}
    \hat{D} := \{A \in \Ds: A \cap D \in \Ds\}
\end{equation*}
then $\hat{\Ds}$ is also a \underline{d-system}.
\end{lemma}
\begin{proof}
\begin{itemize}
    \item $\Omega \in \hat{\Ds}$ is trivial.
    \item For $A,B \in \hat{\Ds}$ s.t. $A \subset B$, we have $(A \setminus B) \cap D = (A \cap D) \setminus (B \cap D) \in \Ds$ as $A \cap D, B \cap D \in \Ds$ $\Rightarrow$ $A \setminus B \in \hat{\Ds}$.
    \item Suppose $(A_n) \in \hat{\Ds}$ s.t. $A_n \uparrow A$, then $A_n \cap D \in \Ds$, $(A_n \cap D) \uparrow (A \cap D) \in \Ds$ $\Rightarrow$ $A \in \hat{\Ds}$.
\end{itemize}
\end{proof}

\begin{theorem}[\textbf{Dynkin's lemma}]\label{Dynkin's lemma}\ \\
If a \underline{d-system} $\Ds$ contains a \underline{p-system} $\Cs$, then it also contains $\sigma(\Cs)$. Furthermore, if $\Ds$ is the \underline{smallest d-system} containing $\Cs$, we have $\Ds  = \sigma(\Cs)$
\end{theorem}
\begin{proof}\ \\
It suffices to show that $\Ds$ is also a $\sigma$-algebra, which is enough   to show it is a \underline{p-system} by the \hyperref[1.4]{Proposition 1.4}
\begin{enumerate}[label = (\arabic*)]
    \item For $B \in \Cs$, define
    \begin{equation*}
        \Ds_1 := \{A \in \Ds: A \cap B \in \Ds\}.
    \end{equation*}
    By \hyperref[1.5]{Lemma 1.5} it is a \underline{d-system}, which contains $\Cs$ since $\Cs$ is a \underline{p-system}. Since by definition $\Ds_1 \subset \Ds$, and $\Ds$ is the smallest such \underline{d-system}, we also have $\Ds \subset \Ds_1$ $\Rightarrow$ $\Ds_1 = \Ds$. Therefore, $A \cap B \in \Ds$ for every $A \in \Ds, B \in \Cs$.
    \item Fix $A \in \Ds$, define
    \begin{equation*}
        \Ds_2 := \{B \in \Ds: A \cap B \in \Ds\}.
    \end{equation*}
    It is a \underline{d-system} agine by \hyperref[1.5]{Lemma 1.5}. By step 1, $\Cs \subset \Ds_1 \subset \Ds_2$. Also by definition $\Ds_2 \subset \Ds_1$ $\Rightarrow$ $\Ds = \Ds_2$. Therefore, $\forall\ A,B \in \Ds$, $A \cap B \in \Ds$ $\Rightarrow$ $\Ds$ is a \underline{p-system}.
\end{enumerate}
\end{proof}
\begin{remark}
Compare the \hyperref[Dynkin's lemma]{Dynkin's Lemma} with \textit{Monotone Class Lemma} in Math 597.    
\end{remark}

\np We call $(E, \Es)$ a measurable space, where $E$ is a set, and $\Es$ is a $\sigma$-algebra on $E$. Suppose $(E,\Es)$ and $(F, \Fs)$ are two measurable space, we can define their product space $(E \times F, \Es \bigotimes \Fs)$, where $$A \times B = \{(x,y): x \in A, y \in B\}$$
is called measurable rectangles for $A \in \Es, B \in \Fs$, and $\Es \bigotimes \Fs = \sigma(\text{measurable rectangles})$.



\vspace{12pt}
\subsection{Functions}

\np For a function $f: E \to F$, we have for $A \subset F$, $f^{-1}(A) = \{x\in E: f(x) \in A\}$.

\begin{lemma}\ 
\begin{itemize}
    \item $f^{-1}(\emp) = \emp$, $f^{-1}(F) = E$.
    \item $f^{-1}(B \setminus C) = f^{-1}(B) \setminus f^{-1}(C)$ for $C \subset B \subset E$.
    \item $f^{-1}(\cupp{n = 1}{\infty} B_n) = \cupp{n=1}{\infty} f^{-1}(B_n),\ f^{-1} (\capp{n = 1}{\infty} B_n) = \capp{n = 1}{\infty} f^{-1}(B_n)$.
\end{itemize}
\end{lemma}

\begin{definition}\ \\
Suppose $(E,\ep), (F,\Fs)$ are memasurable spaces, $f:E \to F$ is measurable w.r.t. $\Es$ and $\Fs$ provided 
\begin{equation*}
    f^{-1}(B) \in \Es,\ \forall\ B \in \Fs
\end{equation*}
\end{definition}

\vspace{3pt}
\begin{proposition}\ \\
$f:E \to F$ is measurable \underline{if.f.} for some $\Fs_0$ that $\Fs = \sigma(\Fs_0)$, we have $f^{-1}(B) \in \Es$, $\forall\ B \in \Fs_0$.
\end{proposition}
\begin{proof}
\begin{itemize}
    \item $\Rightarrow:$ Trivial as $\Fs_0 \subset \Fs$.
    \item $\Leftarrow:$ It is equivalent to show if $f^{-1}(\Fs_0) \subset \Es$, then $f^{-1}(\Fs) \subset \Es$. Let $\Os = \{A \in F: f^{-1}(A) \in \Es \}$, then we know $\Fs_0 \in \Os$. It suffices to check $\Os$ is a $\sigma$-algebra, and thus $\Fs = \sigma(\Fs_0) \subset \Os$, which gives the proof of this direction.
\end{itemize}
\end{proof}

\begin{proposition}\label{1.10}\ \\
For measurable spaces $(E,\Es), (F,\Fs),(G,\Gs)$, and functions $f: E \to F,\ g: F \to G$. If $f,g$ are measurable, then $g \circ f$ is also measurable.
\end{proposition}

\begin{theorem}[limit of measurable functions is also measurable]\ \\
For $(f_n) \subset \Ls_0(\Fs)$ s.t. $f_n \to f$ if exists, we have $f = \lim_n f_n \in \Ls_0(\Fs)$. 
\end{theorem}
\begin{remark}
For conveniece, $\Fs := \Bs(\R),\ \Ls_0(\Fs) := \text{set of measurable functions}\ w.r.t.\ \Fs$.
\end{remark}

\begin{proof}
\begin{enumerate}
    \item From Math 597, we know $\Bs_{\R} = \sigma(\{(-\infty,r]: r \in \R\})$. Let $f = \sup_{n} f_n$, we have $$f^{-1}((-\infty,r]) = \cap_{n=1}^\infty f_n^{-1}(-\infty, r]) \in \Fs.$$
    Thus $\sup_n f_n \in \Ls_0(\Fs)$.
    \item Similarly, we can show $\inf_n f_n \in \Ls_0(\Fs)$.
    \item Furthermore, one can show $\liminf_n{f_n} = \sup_{k > 0} \inf_{n \geq k} f_n,\ \limsup_n{f_n} = \inf_{k \geq 0} \sup_{n \geq k} f_n$ are measurable.
    \item $\lim_n f_n = \liminf_n{f_n} = \limsup_n{f_n}$ is measurable id exists.
\end{enumerate}
\end{proof}

\np Then we will consider the \underline{approximation of measurable functions} using simple functions. First, for function $y = x$, we consider an approximation 
$$d_n(r) = \sum_{k=1}^{n 2^n} \frac{k-1}{2^n} \1_{[\frac{k-1}{2^n} , \frac{k}{2^n})} (r) + n \1_{[n,\infty)} (r).$$
It should be noted that $d_n(r) \uparrow r$ as $n \to \infty$.

\begin{theorem}[approximation of measurable functions]\label{approximation of measurable functions}\ \\
A positive function $f$ is measurable \underline{if.f} it is an increasing limit of \underline{simple measurable functions}.

\end{theorem}
\begin{proof}\ 
\begin{itemize}
    \item \textbf{Necessity:} Define $f_n = d_n \circ f$, which is a simple function, and one can show $f_n \overset{n \to \infty}{\to} f$.
    \item \textbf{Sufficiency:} The limit of measurable functions is measurable.  
\end{itemize}
\end{proof} 
\begin{remark}
Simple functions are functions of the form $\sum_{i=1}^n a_i \1_{A_i},\ a_i \in \R,\ A_i \in \Es$, where $\Es$ is a $\sigma$-algebra.
\end{remark}

\vspace{6pt}
\begin{lemma}\ \\
$\Ls_0$ is a vector spcae:
\begin{itemize}
    \item $h_1,h_2 \in \Ls_0$ $\Rightarrow$ $h_1 + h_2 \in \Ls_0$.
    \item $\lambda \in \R,\ h \in \Ls_0$ $\Rightarrow$ $\lambda h \in \Ls_0$.
\end{itemize}
\end{lemma} 
\begin{proof}\ \\
Consider the set $\{h_1 + h_2 > c\} = \cup_{q \in \Q} [\{h_1 > q\} \cup \{h_2 > c - q\}]$ since $\Q$ is dense in $\R$, it can be easily checked that it is measurable, since the unions for rational numbers are countable.
\end{proof}

\begin{lemma}
$h_1, h_2 \in \Ls_0$ $\Rightarrow$ $\max{(h_1, h_2)} = h_1 \vee h_2 \in \Ls_0$, $\min{(h_1, h_2)} = h_1 \wedge h_2 \in \Ls_0$.
\end{lemma}
\begin{proof}\ \\
Simply merge ($\wedge$ or $\vee$) the approximating simple functions for $h_1,h_2$ and construct new approximating simple functions. 
\end{proof}
    
\begin{corollary}\ \\
$f^+ = f \wedge 0,\ f^- = - (f \vee 0) \in \Ls_0$ \underline{if.f} $f \in \Ls_0$ ($f = f^+ - f^-$).
\end{corollary}
\begin{proof}\ \\
Easy. All about operations on simple functions and approximations.
\end{proof}

\vspace{4pt}
\subsubsection{Monotone Class Theorem for functions}
\begin{definition}[Monotone Class of functions]\label{1.16}\ \\
A collection $\Ms$ of measurable functions is a \underline{Monotone Class} if
\begin{enumerate}[label = (\arabic*)]
    \item $f(x) = 1 \in \Ms$.
    \item $f,g \in \Ms_b,\ a,b \in \R$ $\Rightarrow$ $af + bg \in \Ms_b$.
    \item $(f_n) \in \Ms_+ \text{ increasing },\ f_n \uparrow f$ as $n \to \infty$ $\Rightarrow$ $f \in \Ms_+$. 
\end{enumerate}
\end{definition}
\begin{remark}
$\Ms_b \subset \Ms$ denotes the set of bounded functions, and $\Ms_+ \subset \Ms$ denotes the set of positive functions.   
\end{remark}

\vspace{6pt}
\begin{theorem}\label{1.17}\ \\
Let $\Ms$ be a Monotone Class of functions. Suppose for some \underline{p-system} $\Cs$ (containing $\Omega$) generating $\sigma$-algebra $\Es =\sigma(\Cs)$, $\1_A \in \Ms,\ \forall\ A \in \Cs$ $\Rightarrow$ $\Ms \supset \Ls_0^+ (\Es), \Ls_0^{b} (\Es)$.
\end{theorem}
\begin{proof}\ 
\begin{enumerate}[label = (\arabic*)]
    \item Define $\Ds = \{A \in \Es: \1_A \in \Ms\}$, by assumption we have $\Cs \subset \Ds$. Therefore, by \hyperref[Dynkin's lemma]{Dynkin's Lemma}, $\Es = \sigma(\Cs) \subset \Ds$. It remains to check $\Ds$ is a \underline{d-system}.
    \begin{itemize}
        \item Since by assumption $\Omega \in \Cs$, we have $\Omega \in \Ds$.
        \item For $A,B \in \Ds$ s.t. $B \supset A$, we have $\1_A, \1_B \in \Ms_b$ and thus $\1_{B \setminus A} = \1_B - \1_A \in \Ms_b$ by (2) in \hyperref[1.16]{Definition 1.16} $\Rightarrow$ $B \setminus A \in \Ds$.
        \item Suppose $(A_n) \in \Ds$ and increasing s.t. $A_n \uparrow A$, then $(\1_{A_n}) \in \Ms_+$ is also increasing and $\1_{A_n} \uparrow \1_A$, and by (3) in \hyperref[1.16]{Definition 1.16} we have $A \in \Ds$.
    \end{itemize}
    Thus $\Ds$ is a \underline{d-system} on $\Omega$.
    \item indicator functions on $\Es$ are in $\Ms$, by (2) in the definition we have all \underline{simple functions} over $\Es$ are in $\Ms$.
    \item Positive measurable functions are increasing limits of simple functions (\hyperref[approximation of measurable functions]{Theorem 1.12}), and by (3) in the \hyperref[1.16]{Definition 1.16} we have $\Ls_0^+\subset \Ms$. For $\Ls_0^b (\Es)$, simply decompose each $f = f^+ - f^-$ and apply respectively.
\end{enumerate}
\end{proof}

\vspace{6pt}
\begin{definition}\ \\   
For $X: \Omega \to E$, define $\sigma(X) = X^{-1} (\Es) = X^{-1} (A),\ \forall\ A \in \Es$ ($\sigma$-algebra generated by $X$), where $\Es$ is a $\sigma$-algebra on $E$.
\end{definition}

\vspace{6pt}
\begin{theorem}
A mapping $V: \Omega \to \R$ belongs to $\Ls_0(\sigma(X))$ \underline{if.f} $V = f \circ X$ for some $f \in \Ls_0(\Es)$.
\end{theorem}
\begin{proof}\ 
\begin{itemize}
    \item $\Rightarrow:$ Let $\Ms$ be the collection of all $V = f \circ X$ for $f \in \Ls_0(\Es)$. WTS $\Ms \supset \Ls_0(\sigma(X))$. First check $\Ms$ is a \underline{Monotone Class}.
    \begin{enumerate}[label = (\arabic*)]
        \item $\1 \in \Ms$, by choosing $\1 = f \circ X$ with $f(x) = 1$.
        \item $u,v \in \Ms_b$, $u = f \circ X,\ v = g \circ X$ and $au + bv = h \circ X$ $\Rightarrow$ $h = af + bg \in \Ls_0(\Es)$.
        \item $(V_n) \in \Ms_+,\ V_n \uparrow V,\ V_n = f_n \circ X$, and then $f = \limsup{f_n} \in \Ls_0^+ (\Es)$. $V = f \circ X,\ f \in \Ls_0(\Es)$. 
    \end{enumerate}
    $\Ms$ includes every indicator function in $\sigma(X)$. If $H \in \sigma(X)$ $\Rightarrow$ $H = X^{-1} (A),\ A \in \Es$. $\1_H = \1_A \circ X$ $\Rightarrow$ $\1_H \in \Ms$. Therefore, $\Ls_0^+(\sigma(X)),\ \Ls_0^b(\sigma(X)) \subset \Ms$ by \hyperref[1.17]{Theroem 1.17}. By further approximation we have $\Ls_0(\sigma(X)) \subset \Ms$.
    \item $\Leftarrow:$ \hyperref[1.10]{Proposition 1.10}.
\end{itemize}
\end{proof}


\vspace{12pt}
\subsection{Measure}

\begin{definition}\ \\
A mapping $\mu: \ep \to \overline{\R}_+$ is a measure on a measurable space $(E,\Es)$ if it satisfies:
\begin{enumerate}[label = (\alph*)]
    \item $\mu(\emp) = 0$.
    \item $\mu(\cup_{i = 1}^\infty A_i) = \sum_{i = 1}^\infty A_i$, $\forall\ (A_n) \subset \Es$ disjoint. (Countably additivity)
\end{enumerate}
\end{definition}
\begin{examples}\
\begin{itemize}
    \item Dirac measure at $x \in X$, $\delta_x(A) = \1_{A}(x)$.
    \item Counting measure, $x_1,\dots,x_n \in E$, $\mu = a_1\delta_{x_1} + \dots + a_n\delta_{x_n}$ (general form of discrete measures).
\end{itemize}
\end{examples}

\begin{definition}\ \\
A measure $m$ on $([0,1], \Bs([0,1]))$ is called \underline{Lebesgue measure} if $m(A) = $ \textit{length of A for every interval $A$}.
\end{definition}

\vspace{3pt}
\begin{example}[Contor set]
Check Math 597 notes.\\
$C_1 = [0,1/3] \cup [2/3, 1]$\\
$C_2 = [0,1/9] \cup [2/9, 1/3] \cup [2/3, 7/9] \cup [8/9, 1]$\\
$\dots$\\
$C = \cap_k C_k$.\\
Length of sets removed $= \frac13 + \frac29 + \frac{4}{27} + \dots = 1$. So $m(C) = 0$. It can be checked that the \underline{Contor set} is uncountable.
\end{example}

\vspace{3pt}
\begin{lemma}\ 
\begin{enumerate}[label = (\alph*)]
    \item $A \subset B \Rightarrow \mu(A) \leq \mu(B)$. (Monotonicity)
    \item $A_n \uparrow A$ $\Rightarrow$ $\mu(A_n) \uparrow A$. (Continuity from below)
    \item $\mu(\cup_{n = 1}^\infty) A_n \leq \sum_{n=1}^\infty \mu(A_n)$. (Countably subadditivity)
\end{enumerate}
\end{lemma}
\begin{proof}\
\begin{enumerate}[label = (\alph*)]
    \item $B = A \cup (B \setminus A)$, then $\mu(B) = \mu(A) + \mu(B \setminus A) \leq \mu(A)$. 
    \item $A_n \uparrow A$, take $B_1 = A_1, B_2 = A_2 \setminus A_1, B_3 = A_3 \setminus A_2,\dots$, which are mutually disjoint sets. Note that $A_n = \cup_{i=1}^n B_i,\ A = \cup_{n=1}^\infty B_n$. Thus we have $\lim_n{\mu(A_n)} = \lim_n \mu(\cup_{i = 1}^n B_i) = \lim_n \sum_{i=1}^n \mu(B_n) = \sum_{i = 1}^\infty \mu(B_i) = \mu(A)$.
    \item follows from (b).
\end{enumerate}
\end{proof}

\begin{remark}[Some notations]\ \\
$\mu(E) < \infty$ $\Rightarrow$ $\mu$ is 'finite'.\\
$\mu(E) = 1$ $\Rightarrow$ $\mu$ is a probability measure.\\
$\mu$ is \underline{$\sigma$-finite} $\Rightarrow$ $\exists\ \text{ a measurable partition } (E_n) \text{ of } E$, s.t. $E = \cup_{n = 1}^\infty E_n$ and $\mu(E_n) < \infty,\ n =1,2,\dots$.\\
$\mu$ is $\Sigma$-finite $\Rightarrow$ $\mu = \sum_{i=1}^\infty \mu_n$ s.t. $\mu_n(E) < \infty$. (Can be implied from the above by setting $\mu_n(A) = \mu(A \cap E_n)$)
\end{remark}

\vspace{6pt}
\subsubsection{Specification of measures}
\begin{theorem}\label{1.23}\ \\
$(E, \Es)$ measurable space, $\mu$ and $\nu$ are two measures on the space s.t. $\mu(E) = \nu(E) < \infty$. If $\mu$ and $\nu$ agree of a \underline{p-system} $\Cs$ s.t. $\Es = \sigma(\Cs)$, then we have $\mu = \nu$ on the whole measure space.
\end{theorem}
\begin{proof}\ \\
Define $\Ds = \{A \in \Es:\ \mu(A) = \nu(A)\}$, and WTS $\Ds \supset \Es$. We are given $\Cs \subset \Ds$ and $\Cs$ is a \underline{p-system}, and it suffices to show $\Ds$ is a \underline{d-system} so that \hyperref[Dynkin's lemma]{Dynkin's lemma} would give the result. 
\begin{itemize}
    \item $E \in \Ds$ since $\mu(E) = \nu(E)$.
    \item $A,B \in \Ds$ s.t. $A \subset B$, and we have $\mu(B \setminus A) = \mu(B) - \mu(A) = \nu(B) - \nu(A) = \nu(B\setminus A)$ $\Rightarrow$ $B \setminus A \in \Ds$.
    \item $(A_n) \subset \Ds$ s.t. $A_n \uparrow A$. $\mu(A) = \mu(\cup_{n = 1}^\infty A_n) = \lim_{n \to \infty} \mu(A_n) = \lim_{n \to \infty} \nu(A_n) = \nu(A)$. Thus $A \in \Ds$.
\end{itemize}
\end{proof}
\begin{remark}\ \\
$\mu((-\infty,r]) = F(r)$, to study $\mu$ it is enough to study $F$. In Math 597, we call $F$ distribution function, which can generate pre-measure.
\end{remark}
\begin{remark}[Notation]\ 
\begin{itemize}
    \item $(E,\Es,\mu)$ is called a measure space. If for $x \in E$, $\mu(\{x\}) > 0$, then $x$ is called an \underline{atom of $\mu$}.
    \item $\mu$ is \underline{diffuse} if it has no \underline{atoms} (such as Lebesgue measure).
    \item $\Ds = \text{ set of all atoms }$, and $\mu(E \setminus \Ds) = 0$, then the measure is said to be \underline{purely atomic}.   
\end{itemize}
\begin{lemma}\ \\
$\mu < \infty$, then it has at most countably finite atoms.
\end{lemma}
\begin{proof}
DIY.
\end{proof}
Let $\nu(A) = \mu(A \cap \Ds)$, $\lambda(A) = \mu(A \setminus \Ds)$, we have $\mu(A) = \nu(A) + \lambda(A)$.
\end{remark}


\vspace{6pt}
\subsubsection{Completeness and Negligible sets}
\begin{definition}\ \\
$(E,\Es,\mu)$ is a measure space, $B \in \Es$ is \underline{negligible} if $\mu(B) = 0$. $A \subset E$ (not necessarily measurable) is \underline{negligible} if $\exists\ B \in \Es$, $\mu(B) = 0$ s.t. $A \subset B$. A measure is \underline{complete} if every \underline{negligible set} is measurable. 
\end{definition}

\vspace{3pt}
\begin{proposition}[Completion]\ \\
Define $\Ns := \text{ the set of all \underline{negligible set}}$, $\bar{\Es} = \sigma(\Es \cup \Ns)$. The completion of $(E,\Es,\mu)$ is $(E,\bar{\Es},\bar{\mu})$: 
\begin{enumerate}[label = (\alph*)]
    \item $B \in \bar{\Es}\Rightarrow B = A \cup N$ where $A \in \Es,\ N \in \Ns$.
    \item $\bar{\mu} (A \cup N) = \mu(A)$ defines a \underline{unique} measure $\bar{\mu}$ on $\bar{\Es}$.
\end{enumerate}
\end{proposition}
\begin{proof}\
\begin{enumerate}[label = (\alph*)]
    \item Define $\Fs = \{B \in A \cup N,\ A \in \Es,\ N \in \Ns\}$. Will show $\Fs$ is a $\sigma$-algebra and complete the proof. Suppose $C = A \cup N$, we have $(A \cup N)^c = \underbrace{(A \cup N')^c}_{\in \Es} \cup \underbrace{(N' \setminus (N \cup A))}_{{\text{negligible}}}$, where $N' \in \Es$ s.t. $N \subset N'$ $\Rightarrow$ $C^c \in \Fs$. The closure under countable unions is easy to show.
    \item The problem is whether $\bar{\mu}$ is \underline{well-defined}. Suppose $A \cup N = A' \cup N'$ $\Rightarrow$ $\mu(A) = \mu(A')$, where $A,A' \in \Es,\ N,N' \in \Ns$. We have $A \subset A' \cup N'$ $\Rightarrow$ $\mu(A) \leq \mu(A' \cup N') = \mu(A')$ by monotonicity of $\mu$, and the other side also holds $\Rightarrow$ $\mu(A) = \mu(A')$.
\end{enumerate}
\end{proof}


\vspace{3pt}
\begin{definition}\ \\
If a statement holds on $A^c$ with $\mu(A) = 0$, we say that it holds \underline{almost everywhere} (a.e.) or \underline{almost surely} (a.s.).
\end{definition}

\vspace{6pt}
\subsubsection{Carath\'{e}odory's extension theorem}
\begin{theorem}[Carath\'{e}odory's extension theorem] \label{C-theorem}\ \\
Let $S$ be a set, $\Sigma_0$ be an algebra and $\Sigma = \sigma(\Sigma_0)$. If $\mu_0: \Sigma_0 \to [0,\infty]$ is a countably additive map, then $\exists$ a measure $\mu$ om $(S,\Sigma)$ s.t. $\mu = \mu_0$ on $\Sigma_0$. Furthermore, if $\mu_0(S) < \infty$ then the extension is unique.
\end{theorem}
\begin{remark}\ \\
The Carath\'{e}odory's extension theorem here is the combination of Carath\'{e}odory's extension theorem and Hahn-Extension Theorem in Math 597, and it should note countably additive $\mu_0$ is defined on $\Sigma_0$, and is only closed in countable additive for countable unions in $\Sigma_0$ (i.e. $\mu(\cup_{n} A_n) = \sum_{n=1}^\infty \mu(A_n)$ only if $\cup_{n} A_n \in \Sigma_0$).
\end{remark}

\begin{lemma}\label{1.29}\ \\
Given a set $S$, $\Gs_0$ algebra on $S$, and let $\lambda: \Gs_0 \to [0,\infty]$ s.t. $\lambda(\emp) = 0$. Define $\Ls_0 \subset \Gs_0$ ($\lambda$-set) s.t. for $L \in \Ls_0$, $\forall\ G \in \Gs_0$, $\lambda(G \cap L) + \lambda (G \cap L^c) = \lambda(G)$.  Then, $\Ls_0$ is an algebra, $\lambda$ is finitely additive on $\Ls_0$. In fact, for $L_1,\dots,L_n \in \Ls_0$, $G \in \Gs_0$, we have $\lambda (\cup_{k=1}^n (L_k \cap G)) = \sum_{k = 1}^n \lambda(L_k \cap G)$.
\end{lemma}
\begin{proof}[Proof of Lemma \ref{1.29}]\ 
\begin{enumerate}[label = (\alph*)]
    \item WTS for $L_1,L_2 \in \Ls_0$, $L = L_1 \cap L_2 \in \Ls_0$.\\
    $L_1 \in \Ls_0 \Rightarrow L^c \cap L_2 = L_2 \cap L_1^c$, $L^c \cap L_2^c = L_1^c$\\ 
    $\Rightarrow$ $\left\{\begin{matrix}
\lambda(L^c \cap G) = \lambda (L_2 \cap L_1^c \cap G) + \lambda (L_2^c \cap G)\\ 
\lambda (L_2^c \cap G) + \lambda (L_2 \cap G) = \lambda (G)\\ 
\lambda (L_2 \cap L_1^c \cap G) + \lambda (L_2 \cap L_1 \cap G) = \lambda (L_2 \cap G)
\end{matrix}\right.$\\
    $\Rightarrow$ $\lambda(L^c \cap G) + \lambda(L \cap G) = \lambda(G)$.
    \item S is a $\lambda$-set (since $\lambda(\emp) = 0$) and obviously complement of $\lambda$-set is $\lambda$-set $\Rightarrow$ $\Ls_0$ is an algebra.
    \item $L_1$ and $L_2$ are disjoint $\lambda$-set.\\
    $(L_1 \cup L_2) \cap L_1 = L_1,\ (L_1 \cup L_2) \cap L_1^c = L_2$\\
    $\Rightarrow$ $\lambda((L_1 \cup L_2) \cap G) = \lambda (L_1 \cap G) + \lambda(L_2 \cap G)$.
\end{enumerate}
\end{proof}
\begin{definition}\ \\
$(S, \Gs)$ measurable sapce, $\lambda: \Gs \to [0,\infty]$ is called an \underline{outer measure} if
\begin{enumerate}[label = (\alph*)]
    \item $\lambda(\emp) = 0$.
    \item $\lambda$ increasing, i.e. $G_1 \subseteq G_2\ (\in \Gs)$, $\lambda(G_1) \leq \lambda(G_2)$.
    \item $\lambda$ countably subadditive. i.e. $(G_k) \subset \Gs$, $\lambda (\cup_{k = 1}^\infty G_k) \leq \sum_{k=1}^\infty \lambda(G_k)$.
\end{enumerate}
\end{definition}
\begin{lemma}[Carath\'eodory's Lemma]\label{C-lemma}\ \\
$(S,\Gs)$ a measurable space, $\lambda$ an \underline{outer measure}, then $\lambda$-sets ($\Ls$) of $\Gs$ is a $\sigma$-algebra on which $\lambda$ is countably additive, then $(S, \Ls, \lambda)$ is a measure space.
\end{lemma}
\begin{proof}[Proof of Lemma \ref{C-lemma}]\ \\
By Lemma \ref{1.29}, it suffices to show if $(L_k) \subset \Ls$ disjoint, then $L = \cup_{k = 1}^\infty L_k \in \Ls$ and $\lambda(L) = \sum_{k = 1}^\infty \lambda(L_k)$.\\
For $G \in \Gs$, we have $\lambda(G) \leq \lambda(L \cap G) + \lambda(L^c \cap G)$ by subadditivity.\\
Define $M_n := \cup_{k \leq n} L_k \in \Ls$,
\begin{align*}
    \lambda(G) &= \lambda(M_n \cap G) + \lambda(M_n^c \cap G)\\
    &\geq \lambda(M_n \cap G) + \lambda(L^c \cap G)\\
    &\geq \sum_{k \leq n} \lambda(L_k \cap G) + \lambda(L^c \cap G)
\end{align*}
Taking $n \to \infty$ and by countable subadditivity, we get
\begin{equation*}
    \lambda(G) \geq \lambda(L \cap G) + \lambda(L^c \cap G).
\end{equation*}
\end{proof}

\begin{proof}[Proof of Thm \ref{C-theorem}]\
\begin{enumerate}[label = (\alph*)]
    \item Let $\Gs$ be the $\sigma$-algebra
 of all subsets of $S$, $G \in \Gs$. Define 
 \begin{equation*}
     \lambda(G) := \inf \{\sum_{n = 1}^\infty \mu_0(F_n): (F_n) \subset \Sigma_0,\ G \subset \cup_{n=1}^\infty F_n\}.
 \end{equation*}
 \textbf{Claim:} \underline{$\lambda$ is an outer measure}.
 \begin{itemize}
     \item Clearly, $\lambda(\emp) = 0$ and $\lambda$ is increasing.
     \item $(G_n) \subset \Gs,\ \lambda(G_n) < \infty,\ n=1,2,\dots$ we can pick a cover $G_n \subseteq \cup_{k = 1}^\infty F_{n,k}$ s.t. $$\sum_{k=1}^\infty \mu_0 (F_{n,k}) < \lambda (G_n) + \ep 2^{-n}.$$
     Take $G := \cup_{n=1}^\infty G_n \subset \cup_{n,k = 1}^\infty F_{n,k}$, we have
     \begin{align*}
         \lambda(G) &\leq \sum_{n = 1}^\infty \sum_{k = 1}^\infty \mu_0(F_{n,k})\\
         &\leq \sum_{n = 1}^\infty \lambda(G_n) + \ep
     \end{align*}
     Since $\ep > 0$ is arbitrary, we have
     \begin{equation*}
         \lambda(G) \leq \sum_{n = 1}^\infty \lambda(G_n).
     \end{equation*}
 \end{itemize}
 \item WTS $\lambda$ is a measure on $(S,\Ls)$, which suffices to show (then apply Lemma \ref{C-lemma}) 
 \begin{itemize}
     \item $\lambda = \mu_0$ on $\Sigma_0$:
     \begin{itemize}
         \item  For $F \in \Sigma_0$, clearly $\lambda(F) \leq \mu_0(F)$. 
         \item For any covering $\cup_{n = 1}^\infty F_n \supseteq F,\ (F_n) \subset \Sigma_0$. Define $E_1 = F_1,\ E_n = F_n \cap (\cup_{k < n} F_k)^c$, then $$\cup_{n = 1}^\infty E_n = \cup_{n=1}^\infty F_n \supset F,\ E_n \subseteq F_n,\ n = 1,2,\dots.$$
         Thus we have $\mu_0 (F) = \mu_0(\cup_{n = 1}^\infty (F \cap E_n)) = \sum_{n = 1}^\infty \mu_0(F \cap E_n) \leq \sum_{n = 1}^\infty \mu_0 (F_n)$. Take inf on both sides, we get $\mu_0(F) \leq \lambda(F)$.
     \end{itemize}
     
     \item $\Sigma_0 \subseteq \Ls (\Rightarrow \Sigma \subset \Ls)$:\\
     $E \in \Sigma_0$, $G \in \Gs$, WTS $\lambda(G) = \lambda(G\cap E) + \lambda(G \cap E^c)$. One direction is given by subadditivity, for another direction, 
     \begin{itemize}
         \item $\forall\ \ep > 0$, $\exists\ (F_n) \subset \Sigma_0$ s.t. $G \subseteq \cup_{n=1}^\infty F_n$ and  $\sum_{n = 1}^\infty \mu_0 (F_n) \leq \lambda(G) + \ep$. 
         \item Note
         \begin{align*}
             \sum_{n = 1}^\infty \mu_0(F_n) &= \sum_{n = 1}^\infty \mu_0(E \cap F_n) + \sum_{n=1}^\infty \mu_0 (E^c \cap F_n)\\
             &\geq \lambda(E \cap G) + \lambda(E^c \cap G)
         \end{align*}
     \end{itemize}
     Combining the two gives
     \begin{equation*}
         \lambda(G) \geq \lambda(E \cap G) + \lambda(E^c \cap G).
     \end{equation*}
 \end{itemize}
 \end{enumerate}
\end{proof}


\vspace{3pt}
\begin{corollary}\ \\
Consider a measurable space $((0,1], \Bs((0,1]))$.  $F \in \Sigma_0$ if $F = (a_1,b_1] \cup \cdots \cup (a_r,b_r]$ for $0 \leq a_1 \leq b_1\leq\dots\leq a_r\leq b_r$. $\Sigma = \sigma(\Sigma_0) = \Bs((0,1])$. $\mu_0 (F) = \sum_{k \leq r} (b_k - a_k)$. Then we simply show $\mu_0$ is countably additive on $\Sigma_0$ and extend the result. 
\end{corollary}

\vspace{12pt}
\subsection{Integral}

\np Let $(E,\Es,\mu)$ be a measure space, we want to give a definition to an "integral" of $f \in \Ls_0(\Es)$ w.r.t.
\begin{equation*}
    \mu f = \mu(f) = \int_E f \dr\mu,
\end{equation*}
with the following properties for non-negative functions:
\begin{enumerate}[label = (\alph*)]
    \item (Positivity) if $f \geq 0 \Rightarrow \mu(f) \geq 0$ and $\mu(f) = 0 \Leftrightarrow f = 0$ a.e..
    \item (Linearity) $\mu(a f + bg) = a \mu(f) + b \mu(g)$ for $a,b \in \R$.
    \item (Monotone Convergence) $f_n \uparrow f$, then $\mu(f_n) \uparrow \mu(f)$.
\end{enumerate}
We define a simple function
\begin{equation*}
    d_n(r) = \sum_{k=1}^{n 2^n} \frac{k-1}{2^n} \1_{[\frac{k-1}{2^n},\frac{k}{2^n})} (r) + n \1_{n,\infty)},\ r \in \R^+.
\end{equation*}
For a non-negative measurable $f \in \Ls_0(\Es)$, $f_n(x) := d_n(f(x)),\ x \in \R$. Then $0 \leq f_n \uparrow f$ as $n \to \infty$.


\vspace{6pt}
\begin{definition}\ 
\begin{enumerate}[label = (\alph*)]
    \item Let $f \in \Ls_0(\Es)$ be simple and positive with canonical representation 
    \begin{center}
        $f = \sum_{i=1}^m a_i \1_{A_i}$, $A_i \cap A_j = \emp, a_i \neq a_j$ for $ i\neq j$.
    \end{center}
    Then define \begin{equation*}
        \mu(f) = \sum_{i=1}^m a_i \mu(A_i).
    \end{equation*}
    
   \item For $f \in \Ls_0^+(\Es)$, let $f_n = d_n \circ f$, then each $f_n$ is simple, non-negative and $f_n \uparrow f$. Each $\mu(f_n)$ is well-defined by (a). Furthermore, \begin{equation*}
       \mu(f_n) \leq \mu(f_{n+1}),\ \forall\ n \geq 1,
   \end{equation*} 
   and thus $\lim_{n \to \infty} \mu(f_n)$ is well-defined. Set 
   \begin{equation*}
   \mu(f) = \lim_{n \to \infty} \mu(f_n).    
   \end{equation*} 
   
   \item Let $f \in \Ls_0(\Es)$, we introduce
   \begin{equation*}
       f^+ := f \vee 0,\ f^- = -(f \wedge 0)
   \end{equation*}
   Set $\mu(f) = \mu(f^+) - \mu(f^-)$, if $\mu(f^+) = \mu(f^-) = \infty$, then $\mu(f)$ is not well-defined. If at least one of $\mu(f^+),\mu(f^-)$ is finite, then $\mu(f)$ is well-defined, but could take $\{-\infty,+\infty\}$. 
   \item For $\mu(f^+), \mu(f^-)$ as in (b), we say that $f \in \Ls_0(\ep)$ is \underline{integrable} if $\mu(f)$ is well-defined and $\mu(f) \in \R$.\\
   \underline{if.f} $\mu(f^-) \vee \mu(f^+) < \infty$\\
   \underline{if.f} $\mu(\abs{f}) < \infty$ ($f \in \Ls_1(\Es)$).
\end{enumerate}
\end{definition}

\begin{remark}\ \\
 Suppose $f$ is simple,
 \begin{enumerate}[label = (\alph*)]
     \item The value $\mu(f)$ does not depend on the simple representation. It can be checked that for another simple representation s.t. $f = \sum_{j=1}^n b_j \1_{B_j}$, it can always be reduced to the canonical representation and thus
     \begin{equation*}
         \mu(f) = \sum_{i=1}^m a_i \mu(A_i) = \sum_{j=1}^n b_j \mu(B_j).
     \end{equation*}
     
     \item Suppose $a,b \in \R_+,\ g,f \in \Ls_0^+(\Es)$, then
     \begin{equation*}
         \mu(af + bg) = a\mu(f) + b \mu(g).
     \end{equation*}
     Note 
     \begin{align*}
         af + cg &= \sum_{j=1}^n ab_j \1_{B_j}+ \sum_{i=1}^m c d_j \1_{D_j}\\
         &= \sum_{i=1}^n \sum_{j=1}^m (a b_j + c d_i) \1_{B_j \cap D_i}.
     \end{align*}
     This is possible since for each $1 \leq j \leq m$, $B_j = \cup_{i=1}^n B_j \cap D_i$ and $(B_j \cap D_i) \cap (B_j \cap D_k) = \emp$ for $i \neq k$. Similarly, $D_i = \cap_{j=1}^m D_i \cap B_j$. Therefore,
     \begin{equation*}
         \mu(af + bg) = a \mu(f) + b \mu(g).
     \end{equation*}
     
     \item Suppose $f \leq g$, then $\mu(f) \leq \mu(g)$. Indeed,
     \begin{align*}
         \mu(f) &\leq \mu(f) + \mu(g - f)\\
         &= \mu(f + (g - f)) = \mu(g).
     \end{align*}
     \item In (b) of the definition of $\mu(f)$, we have $f_n(x) := d_n(f(x))$ which is simple non-negative and increasing. Apply (c) to $f_n$, we have
     \begin{align*}
         \mu(f_n) \leq \mu(f_{n+1}),\ \forall\ n \geq 1
     \end{align*}
     and thus $\lim_{n \to \infty} \mu(f_n)$ is well-defined.
 \end{enumerate}
\end{remark}

\begin{proposition}\
\begin{enumerate}[label = (\alph*)]
    \item If $y \in \Ls_0^+(\Es)$, then $\mu(f) \geq 0$.
    \item If $f,g \in \Ls_0^+(\Es)$ s.t. $f \leq g$, then $\mu(f) \leq \mu(g)$.
\end{enumerate}
\end{proposition}
\begin{proof}\
\begin{enumerate}[label = (\alph*)]
    \item Immediate from the definition since $\mu(f) = \lim_{n \to \infty} \mu(f_n) \geq \mu(f_n) \geq 0,\ \forall\ n \geq 1$.
    \item Let $f_n = d_n \circ f,\ g_n = d_n \circ g$, and note $d_n$ is non-decreasing and thus $f_n \leq g_n$ $\Rightarrow \mu(f_n) \leq \mu(g_n)$. Taking limit on both sides and complete the proof.
\end{enumerate}
\end{proof}

\begin{theorem}[Monotone Convergence Theorem]\label{MCT}\ \\
Let $(f_n)_{n \geq 1} \subset \Ls_0^+(\Es)$ be an increasing sequence, then
\begin{equation*}
    \mu(\lim_{n \to \infty} f_n) = \lim_{n \to \infty} \mu(f_n).
\end{equation*}
\end{theorem}
\begin{proof}\ \\
$f = \lim_{n \to \infty} f_n$ is well-defined, and $f \in \Ls_0^+(\ep)$. Since $(f_n)_{n \geq 1}$ forms an increasing sequence of functions, $(\mu(f_n))_{n\geq 1}$ forms an increasing sequence of reals. Therefore, $\lim_{n \to \infty} \mu(f_n)$ exists. We want to show 
\begin{equation*}
    \mu(f) = \lim_{n \to \infty} \mu(f_n)
\end{equation*}
Since $f \geq f_n,\ \forall\ n \geq 1$, we have $\mu(f) \geq \mu(f_n),\ \forall\ n \geq 1$ $\Rightarrow$ $\mu(f) \geq \lim_{n \to \infty} \mu(f_n)$. It remains to show
$$\mu(f) \leq \lim_{n \to \infty} \mu(f_n).$$
\begin{itemize}
    \item Suppose that $f(x) > b \in \R_+,\ \forall\ x \in B \in \Es$, then $\{f_n > b\}$ increases to $\{f > b\}$. $B_n := B \cap \{f_n > b\}$ $\Rightarrow$ $B_n$ increases to $B$ $\Rightarrow$ $\mu(B_n) \to \mu(B)$. Note that 
    $$f_n \1_B \geq f_n \1_{B_n} \geq b \1_{B_n},$$
    we have 
    \begin{equation*}
        \mu(f_n \1_B) \geq b \mu(B_n)
    \end{equation*} 
    \begin{equation*}
        \Rightarrow \limm{n}{\infty} \mu(f_n \1_B) \geq b \mu(B)
    \end{equation*}
    \begin{remark}
     Note the above inequality works if we define $B = \{x: f(x) \geq b\},\ B_n = \{x: f_n(x) \geq b\}$. Let $b_m \to b$, then the above inequality holds for all $m$. Replace every $b$ with $b_m$, and take    $\limm{m}{\infty}.$
    \end{remark}
    \item Let $g$ be a simple function s.t. $f \geq g$, where $g = \summ{i=1}{m} b_i \1_{B_i}$ is its canonical form. 
    \begin{itemize}
        \item $f(x) \geq b_i,\ \forall\ x \in B_i$.
        \item $\limm{n}{\infty} \mu(f_n \1_B) \geq b_i \mu(B_i),\ \forall\ i \in \{1,2,\dots, m\}$.
        \item $\limm{n}{\infty} \mu(f_n) = \limm n \infty \sum_{i=1}^m \mu(f_n \1_{B_i}) = \summ{i=1}{m} \limm n \infty \mu(f_n \1_{B_i}) \geq \summ{i=1}{\infty} b_i \mu(B_i) = \mu(g)$.
    \end{itemize}
    \item We can find a sequence of increasing simple functions $(g_k)$ that converges to $f$. Therefore, we have
    \begin{equation*}
        \limm n \infty \mu(f_n) \geq \mu(g_k),\ \forall\ k
    \end{equation*}
    \begin{equation*}
        \limm n \infty \mu(f_n) \geq \limm k \infty \mu(g_k) = \mu(f).
    \end{equation*}
\end{itemize}


\begin{lemma}\ \\
Let $f \in \Ls_0^+(\Es)$ and $A,B$ two disjoint sets with $A \cup B = C$. then
\begin{equation*}
    \mu(f \1_A) + \mu(f \1_B) = \mu(f \1_C).
\end{equation*}
\begin{proof}\ \\
If $f$ is simple the the result is trivial with $f \1_C = f(\1_A + \1_B)$. Now suppose $f \in \Ls_0^+(\ep)$, let $f_{n} = d_n \circ f$, then
\begin{equation*}
    \mu(f_n \1_A) + \mu(f_n \1_B) = \mu(f_n \1_C).
\end{equation*}
Furthermore, 
\begin{equation*}
    d_n(f(x)) \1_D(x) = d_n (f(x) \1_D(x)),
\end{equation*}
and thus
\begin{equation*}
    \mu(f_n \1_D) = \mu(d_n \circ (f \1_D)),\ D \in \{A,B,C\}
\end{equation*}
Taking limit on both sides, we get the desired result.
\end{proof}
\end{lemma}
\end{proof}


\clearpage
\begin{corollary}[Linearity of integration]\ \\
For $f,g \in \Ls_0^+(\ep),\ a,b \in \R_+$, we have $\mu(af + bg) = a\mu(f) + b\mu(g)$.
\end{corollary}
\begin{proof}\ \\
Take $f_n = d_n \circ f,\ g_n = d_n \circ g$, then
\begin{align*}
    \mu(af_n + bg_n) = a \mu(f_n) + b \mu(g_n)
\end{align*}
Apply MCT, we complete the proof.
\end{proof}
\begin{remark}\ \\
In fact, MCT is unnecessary for here, since the integral is defined as the limit of the integral of a sequence simple functions constructed using $d_n$, and it is done if we have
\begin{equation*}
    d_n \circ (f + g) = d_n \circ f + d_n \circ g.
\end{equation*}
\end{remark}

\vspace{6pt}
\subsubsection{Intensity of the integral}

\begin{proposition}\ \\
If $A \in \Es$ is negligible, then $\mu(f \1_A) = 0,\ \forall\ f \in \Ls_0(\Es)$. If $f,g \in \Ls_0^+(\Es)$ and $f = g$ a.e, then $\mu(f) = \mu(g)$. If $f \in \Ls_0^+(\Es)$ and $\mu(f) = 0$, then $f = 0$ a.e. 
\end{proposition}
\begin{proof}\ 
\begin{itemize}
    \item If $f \in \Ls_0^+ (\Es)$ are simple, then $\mu(f \1_A) = 0$.
    \item If $f \in \Ls_0^+(\Es)$, then take a sequence of increasing simple functions $(f_n)$ s.t. $\mu(f_n \1_A) = 0,\ \forall\ n$.
    \begin{equation*}
        \limm{n}{\infty} \mu(f_n \1_A) = \mu(f \1_A) = 0 
    \end{equation*}
    \item If $f \in \Ls_0(\Es)$, then write $f = f^+ - f^-$ and take the last step.
    \item If $f,g \in \Ls_0^+(\Es)$, and $f = g$ a.e., then $A = \{x: f(x) \neq g(x)\}$ is negligible and measurable $\Rightarrow$ $\mu(f \1_A) = \mu(g \1_A) = 0$ $\Rightarrow$ $\mu(f) = \mu(f \1_{A^c}) = \mu(g \1_{A^c}) = \mu(g)$
    \item WTS $N = \{f > 0\}$ is negligible. Let $\ep_k > 0,\ \forall\ k$, $\ep_k \downarrow 0$. Let $N_k = \{f > \ep_k\}$, then $N_k \uparrow N$ $\Rightarrow$ $\mu(N_k) \to \mu(N)$. $f \geq \ep_k \1_{N_k}$ $\Rightarrow$ $0 = \mu(f) \geq \ep_k \mu(N_k) \geq 0$ $\Rightarrow$ $\mu(N_k) = 0,\ \forall\ k$.
  \end{itemize}
\end{proof}

\begin{theorem}[Fatou's Lemma]\label{Fatou's Lemma}\ \\
Let $(f_n) \subset \Ls_0^+(\Es)$, $\mu(\liminf_n f_n) \leq \liminf_n \mu(f_n)$.
\end{theorem}
\begin{proof}\ \\
Let $g_m = \inf_{n \geq m} f_n$, then $(g_m)$ is increasing. We have
\begin{equation*}
    \limm m \infty g_m = \limm m \infty \inf_{n\geq m} f_n.
\end{equation*}
and 
\begin{equation*}
    \limm m \infty \mu(g_m) = \mu(\limm m \infty g_m).
\end{equation*}
On the other hand, note $g_n \leq f_n,\ \forall\ n \geq m$, therefore,
\begin{equation*}
    \mu(g_m) \leq \mu(f_n),\ \forall\ n \geq m
\end{equation*}
\begin{equation*}
    \Rightarrow \mu(g_m) \leq \inf_{n \geq m} f_n
\end{equation*}
\begin{equation*}
    \Rightarrow \mu(\liminf_n f_n) = \limm m \infty \mu(g_m) \leq \limm m \infty \inf_{n \geq m} f_m,
\end{equation*}
which completes the proof.
\end{proof}

\begin{corollary}\ \\
Let $(f_n) \in \Ls_0(\Es)$. If there is an integrable $g$ s.t. $f_n \geq g,\ \forall\ n$, then
\begin{equation*}
    \mu(\linf n\infty f_n) \leq \linf n \infty \mu(f_n).
\end{equation*}
If there is an integrable $g$ s.t. $f_n \leq g,\ \forall\ n$, then 
\begin{equation*}
    \mu(\lsup n \infty f_n) \geq \lsup n \infty \mu(f_n).
\end{equation*}
\end{corollary}
\begin{proof}\ \\
$A = \{g \in \R\}$ and apply \hyperref[Fatou's Lemma]{Fatou's Lemma} to $f_n\1_A - g \1_A$ and $g \1_A - f_n \1_A$.
\end{proof}


\begin{definition}\ \\
A function $f$ is said to be dominated by $g$ if $\abs{f} \leq g$. A sequence of functions $(f_n)$ is said to be \underline{dominated by} $g$ if $\abs{f_n} \leq g,\ \forall\ n$.
\end{definition}

\vspace{6pt}
\begin{theorem}[Dominated Convergence Theorem]\label{DCT}\ \\
Let $(f_n) \subset \Ls_1(\Es)$. Suppose that $(f_n)$ is monotone by some $g \in \Ls_1(\Es)$. If $\limm n \infty f_n$ exists, then it is integrable and 
\begin{equation*}
    \mu(\limm n \infty f_n) = \limm n \infty \mu(f_n).
\end{equation*}
\end{theorem}
\begin{proof}\ \\
We have $- g \leq f_n \leq g,\ \forall\ n$, then
\begin{equation*}
    \mu(\linf n \infty f_n) \leq \linf n \infty \mu(f_n) \leq \lsup n \infty \mu(f_n) \leq \mu(\lsup n \infty f_n).
\end{equation*}
If $\limm n \infty f_n$ exists, then $\linf n \infty f_n = \lsup n \infty f_n$, and thus every inequality becomes equality, and $\limm n \infty f_n$ is integrable since it is dominated by $g$.
\end{proof}

\begin{example}\ \\
Let $(F,\Fs,P) = ([0,1],\Bs[0,1], \text{Lebesgue measure})$, $X_n = n^2 \1_{(0,\frac{1}{n})} \to 0$ as $n \to \infty$. For the integral we have $\E X_n \to \infty$, where DCT fails, but Fatou's lemma holds s.t.
\begin{equation*}
    \E[\liminf X_n] = 0 < \liminf \E X_n = +\infty.
\end{equation*}
\end{example}

\vspace{6pt}
\begin{corollary}[Scheffe's Lemma]\ \\
Let $f \in \Ls_1(\Omega, \Fs, \mu)$ if $\mu(\abs{f}) = \mu f^+ + \mu f^- < \infty$ ($\mu f = \mu f^+ - \mu f^-  \Rightarrow \abs{\mu f} \leq \mu(\abs{f})$). Suppose $X, (X_n) \subset \Ls_1^+(\Omega, \Fs, \mu)$ and $X_n \to X$ a.s., then 
\begin{equation*}
    \mu(\abs{X_n - X}) \to 0\ (\text{convergence in } \Ls_1) \Leftrightarrow \mu(X_n) \to \mu(X)
\end{equation*}
\end{corollary}
\begin{proof}\
\begin{enumerate}
    \item If $\mu(\abs{X_n - X}) \to 0$, then by observation $\mu(X_n) \to \mu(X)$.
    \item Suppose $\mu(X_n) \to \mu(X)$, we have 
    \begin{itemize}
        \item $(X_n - X)^{-} \leq X \overset{\mathrm{DCT}}{\Rightarrow} \mu((X_n - X)^-) \to 0$.
        \item $\mu((X_n - X)^+) = \mu((X_n - X) (\1 - \1_{\{X_n < X\}})) = \mu(X_n) - \mu(X) - \mu((X_n - X)\1_{\{X_n < X\}}) \to 0$.
    \end{itemize}
\end{enumerate}
\end{proof}


\vspace{12pt}
\subsubsection{Characterization of Integral}
\begin{theorem}[Daniell's Theorem]\label{Daniell's Theorem}\ \\
Let $(E,\Es)$ be a measurable space, exists $L : \Ls_0^+(\Es) \to \R_+$ s.t. 
\begin{enumerate}[label = (\alph*)]
    \item $f = 0$ \imply $L f = 0$.
    \item $f,g \in \Ls_0^+,\ a,b \in \R_+$ \imply $L(af + bg) = a L f + b L g$.
    \item $(f_n) \subset \Ls_0^+ (\Es)$ and $f_n \uparrow f$ \imply $L f_n \uparrow L f$.
\end{enumerate}
\underline{if and only if} $\exists$ measure $\mu$ s.t. $Lf = \mu f$.
\end{theorem}
\begin{proof}\ 
 \begin{itemize}
     \item The sufficiency is trivial by MCT.
     \item We define $\mu(A) = L(\1_A)$, then we first check that $\mu$ is a measure:
     \begin{itemize}
         \item $\mu(\emp) = L(\1_\emp) = L(0) = 0$.
         \item $A_1,\dots,A_n \in \Es$ disjoint, let $A = \kupp{i=1}{n} A_i$, then $\1_{\kupp{i=1}{n} A_i} = \summ{i=1}{n} \1_{A_i} \to \1_A$. We have
         \begin{align*}
             \mu(A) &= L(\1_A) = \limm{n}{\infty} L(\summ{i=1}{n} \1_{A_i})\\
             &= \limm{n}{\infty} \summ{i=1}{n} L(\1_{A_i})\\
             &= \summ{i=1}{\infty} \mu(A_i)
         \end{align*}
     \end{itemize}
     Then $L(f) = \mu (f)$ is true for all indicator functions, and by (b) true for simple functions. Then for all $f \in \Ls_+^0 (\ep)$, $\exists$ a sequence of simple functions such that $f_n \uparrow f$, and thus
     \begin{equation*}
         L(f) = \limm{n}{\infty} L(f_n) = \limm{n}{\infty} \mu(f_n) \overset{MCT}{=} \mu(f)
     \end{equation*}
 \end{itemize}
\end{proof}

\vspace{3pt}
\begin{definition}\ \\
Let $(F,\Fs,\nu)$ be a measure space and $(E,\Es)$ a measurable space. Let $h: F \to E$ be a measurable function, define \underline{push-forward measure} $\nu \circ h^{-1}: \Es \to \R_+$ s.t. $\nu \circ h^{-1}(B) = \nu(h^{-1}(B))$ for measurable $B$.
\end{definition}

\vspace{3pt}
\begin{theorem}\ \\
Following the above definition, we have $(\nu \circ h^{-1})(f) = \nu(f \circ h)$ for $f \in \Ls_+^0 (\Es)$.
\end{theorem}
\begin{proof}\ \\
 $L(f) = \nu(f \circ h)$, where $L$ satisfies (a),(b),(c) in \hyperref[Daniell's Theorem]{Daniell's Theorem} \imply  $\exists$ measure $\mu$ s.t. $Lf = \mu f$, and for $B \in \Es$,
 \begin{equation*}
     \mu(B) = L(\1_B) = \nu(\1_B \circ h) = \nu(h^{-1}(B)) = \nu \circ h^{-1} (B)
 \end{equation*}
\end{proof}
\begin{remark}\ \\
Williams calls the proof \textit{standard machinery}:
\begin{enumerate}[label = (\roman*)]
    \item Show for indicators.
    \item Then Simples.
    \item Then arbitrary positive measures.
\end{enumerate}
\end{remark}

\begin{notation}
$(E,\Es,\mu)$, $p \in \Ls_0^+(\Es)$, then $\nu(A) = \mu(p \1_A) = \int_A \mu(dx) p(x)$. We denote $p = \frac{d\nu}{d\mu}$ (R-N derivative).
\end{notation}

\vspace{3pt}
\begin{proposition}\ \\
$\nu f = \mu (p f)$
\end{proposition}
\begin{proof}\ \\
$L(f) = \mu(pf)$ and apply \hyperref[Daniell's Theorem]{Daniell's Theorem}.
\end{proof}

\vspace{3pt}
\begin{definition}\  \\
Let $(S, \Ss)$ be a measurable space, and $\mu,\nu$ are measures on it,
\begin{enumerate}[label = (\arabic*)]
    \item $\nu$ is \underline{absolutely continuous w.r.t  (or dominated by) $\mu$}, denoted by $\nu \ll \mu$, if $\mu(A) = 0$ \imply $\nu(A) = 0$.
    \item $\mu$ and $\nu$ are equivalent if they are both absolutely continuous w.r.t each other.
    \item $\mu$ and $\nu$ are \underline{singular} to each other, or $\mu \perp \nu$ if there exists a measurable $D \in \Ss$ s.t. 
    \begin{center}
        $\mu(D) = 0$ and $\nu(D^c) = 0$.
    \end{center}
\end{enumerate}
\end{definition}


\subsection{Radon-Nikodym Theorem}
\begin{theorem}[Radon-Nikodym Theorem]\label{R-N thm}\ \\
Suppose $\mu,\nu$ are $\sigma$-finite measures on $(S,\Ss)$ with $\nu \ll \mu$, then $\exists\ f \in \Ls_0^+$ s.t.
\begin{equation*}
    \nu(A) = \int_A f d\mu.
\end{equation*}
For any other $g \in \Ls_0^+$ satisfying the above equation, we have $f = g$ $\mu$-a.e..
\end{theorem}

\begin{definition}[Signed measure]\ \\
Let $(S,\Ss)$ be a measurable space, then $\mu: \Ss \to (-\infty,+\infty]$ is a signed measure if
\begin{enumerate}[label = (\alph*)]
    \item $\mu(\emp) = 0$.
    \item $\mu(\cupp{n=1}{\infty} A_n) = \summ{n=1}{\infty} \mu(A_n)$, where $(A_n)$ are disjoint.
\end{enumerate}
\end{definition}

\begin{definition}\ \\
$\{a_n\} \subset (-\infty,\infty]$ is said to be \underline{summable} if $\summ{n=1}{\infty} a_n^- < \infty$, then 
\begin{equation*}
    \summ{n=1}{\infty} a_n = \summ{n=1}{\infty} a_n^+ - \summ{n=1}{\infty} a_n^-.
\end{equation*}
\end{definition}

\begin{definition}\ \\
Define $P(A) = \text{ the set of all measurable partitions of }A$.
\end{definition}

\begin{definition}[Total variation of $\mu$ on A]\ \\
Let $\mu$ be a signed measure on $(S,\Ss)$, $\abs{\mu}(A) := \sup_{\{D_1,\dots,D_n\} \in P(A)} \summ{k=1}n \abs{\mu(D_k)}$, and we say $$\abs{\mu}(S) := \text{ \underline{Total variation} of } \mu.$$
\end{definition}

\begin{theorem}[Hahn-Jordan Decomposition of signed measures]\label{HJ decomposition}\ \\
Let $(S,\Ss)$ be a measurable space, and $\mu$ a signed measure, then $\exists$ unsigned measures $\mu^+$ and $\mu^-$ s.t.
\begin{enumerate}[label = (\alph*)]
    \item $\mu^-$ is finite.
    \item $\mu(A) = \mu^+(A) - \mu^-(A)$.
    \item $\abs{\mu}(A) = \mu^+(A) + \mu^-(A)$.
\end{enumerate}
Then $\mu^+,\mu^-$ are unique. Moreover, $\exists\ D \in \Ss$ s.t. 
\begin{align*}
    \mu^+ (A) &= \mu(A \cap D^c)\\
    \mu^-(A) &= - \mu(A \cap D)
\end{align*} 
for all $A \in \Ss$, and these measures are unique.
\end{theorem}
\begin{proof}\ \\
Call a set $B$ \underline{negative} if $\mu(C) \leq 0,\ \forall\ C \subseteq B$. Let $\Ps$ be the collection of all negative sets, which is not empty since at least $\emp \in \Ps$. Set $\beta = \inf \{\mu(B): B \in \Ps\}$.\\
Let $(B_n)$ be a minimizing sequence of negative sets $\mu(B_n) \to \beta$, and take $D = \cupp{n=1}{\infty} B_n$, and $D$ is also a negative sequence. We have
\begin{equation*}
    \mu(D) = \mu(\cupp{n=1}{\infty} B_n) \leq \inf_n \mu(B_n) = \beta,
\end{equation*}
which further implies $\mu(D) = \beta$. 
\begin{claim}
$D^c$ is a positive set ($\forall\ E \subseteq D^c,\ \mu(E) \geq 0$)
\end{claim}
In the contrary, $\exists\ E \subset D^c$ s.t. $\mu(E) < 0$. If $E$ is a negative set, we reach a contradiction, since $D \cup E$ would also be a negative set. Therefore, $E$ can't be a negative set, however, by the following lemma, $\exists\ A \subset E$, where $A$ is a negative set, and we still reach a contradiction.
\begin{lemma}\ \\
Suppose a set $E \in \Ss$ has measure $-\infty<\mu(E)<0$, then $\exists\ A \subset E$ s.t. $A$ is a negative set.
\end{lemma}
\begin{proof}[proof of lemma]\ \\
If $E$ is a negative set, we're done;\\
If $E$ is not a negative set, we can take the smallest $k_1$ s.t. $\exists$ $E_1 \subset E$, $\frac{1}{k_1 + 1} <\mu(E_1) < \frac{1}{k_1}$. If $E \setminus E_1$ is negative, we are done; Otherwise, we can similarly construct $E_1,E_2,\dots$.\\
Define $A = E \setminus (\cupp{i=1}{\infty} E_i)$, we have 
\begin{equation*}
    \mu(A) = \mu(E) - \summ{i=1}{\infty} \mu(E_i) < \mu(E) - \summ{i=1}{\infty} \frac{1}{k_i + 1} < 0.
\end{equation*}
In addition, note $\forall\ F \subset A$, we have $\mu(F) < \frac{1}{k_n},\ \forall\ k_n \in \N$, and thus $\mu(F) \leq 0$, which shows $A$ is a negative set.
\end{proof}
The \underline{uniqueness} is easy, which suffices to show $D,D'$ differs up to a $\mu$-zero set (i.e. $\mu(D \cap D') = 0$).
\end{proof}

\begin{theorem}[Lebesgue Decomposition Theorem]\label{Lebesgue decomposition}\ \\
Let $(S, \Ss)$ be a measurable space, $\mu,\nu$ are two $\sigma$-finite measures. Then, $\nu = \nu_a + \nu_s$ s.t.
\begin{itemize}
    \item $\nu_a \ll \mu$
    \item $\nu_s \perp \mu$
\end{itemize}
which means $\exists$ unique $f \in \Ls_0^+$ a.s. s.t. $\nu_a(A) = \int_A f d\mu$.
\end{theorem}
\begin{proof}\
\begin{enumerate}
    \item (\textit{Uniqueness of decomposition}) Suppose $\nu = \nu_a^1 + \nu_s^1 = \nu_a^2 + \nu_s^2$. Let $D^1, D^2$ be the singular sets, and let $D = D^1 \cup D^2$ \imply
    \begin{center}
        $\mu(D) = 0$ and $\nu_s^1(D^c) = \nu_s^2(D^c) = 0$.
    \end{center}
    Take $A \in \Ss$ s.t. $\mu(A \cap D) = 0$, and by absolutely continuity, we have
    \begin{equation*}
        \nu_a^1(A\cap D) = \nu_a^2(A \cap D) = 0 \Rightarrow \nu_s^1(A \cap D) = \nu_s^2(A \cap D) = \nu(A \cap D).
    \end{equation*}
    By singularity,
    \begin{equation*}
        \nu_s^1(A \cap D^c) = \nu_s^2 (A \cap D^c) = 0 \Rightarrow \nu_a^1 (A \cap D^c) = \nu^2_a (A \cap D^c) = \nu(A \cap D^c).
    \end{equation*}
    This implies
    \begin{align*}
        \nu_a^1(A) &= \nu_a^1 (A \cap D) + \nu_a^1 (A \cap D^c)\\
        &= \nu_a^2 (A \cap D) + \nu_a^2(A \cap D^c)\\
        &= \nu_a^2 (A). 
    \end{align*}
    \item (\textit{Uniqueness of function}) Suppose $\nu_a(A) = \int_A f_i \dr{\mu},\ i = 1,2$, and $\{C_n\}$ a partition of $S$ s.t. $\nu(C_n) < \infty$, take
    \begin{equation*}
        B_n = \{f_1 \geq f_2\} \cap C_n,\ g_n = f_1 \1_{B_n} - f_2 \1_{B_n} \in \Ls_0^+.
    \end{equation*}
    Thus we have
    \begin{equation*}
        \int_{B_n} g_n \dr(\mu) = \int_{B_n} f_1 \dr{\mu} - \int_{B_n} f_2 \dr \mu = \nu_a(B_n) - \nu_a(B_n)= 0
    \end{equation*}
    which implies $g_n = 0$ $\mu$-a.s.
    \item (\textit{Existence}) Assume $\mu, \nu$ are finite measures, let $\Rs$ be the set of all non-negative functions s.t.
    \begin{equation*}
        \forall\ A \in \Ss,\ \nu(A) \geq \int_A f \dr \mu.
    \end{equation*}
    \begin{itemize}
        \item $f_1,f_2 \in \Rs$ \imply $f = \max{(f_1, f_2)} \in \Rs$.
        \item $(f_n) \subset \Rs$ s.t. $f_n \uparrow f$ \imply $f \in \Rs$ (MCT).
    \end{itemize}
    For the first property, take $E = \{x:\ f_1(x) \geq f_2(x)\}$, then
    \begin{align*}
        \int_A f \dr \mu &= \int_{A \cap E} f_1 \dr \mu + \int_{A \cap E^c} f_2 \dr \mu\\
        &\leq \mu(A \cap E) + \mu(A \cap E^c)\\
        &= \mu(A).
    \end{align*}
    For the second property, we have $(f_n) \subset \Rs$ s.t.
    \begin{equation*}
        \int f_n \dr \mu \uparrow \sup\{\int f \dr \mu:\ f \in \Rs\}.
    \end{equation*}
    By the first property, we can replace $f_n$ by $\max{(f_1,\dots,f_n)}$ so that we can choose $f_n \uparrow f$ and $f = \lim_{n \to \infty} f_n \in \Rs$. By MCT,
    \begin{equation*}
        \int f \dr \mu = \lim_n \int f_n \dr \mu.
    \end{equation*}
    Thus we can set
    \begin{equation*}
        \nu_a(A) := \int_A f \dr \mu \Rightarrow \mu \gg \nu_a,
    \end{equation*}
    and define 
    \begin{equation*}
        \nu_s = \nu - \nu_a \in [0, +\infty].
    \end{equation*}
    It remains to show \underline{$\nu_s \perp \mu$}. We construct
    \begin{equation*}
        \nu_b = \nu_s - \frac{1}{n} \mu
    \end{equation*}
    is a signed measure, and by \hyperref[HJ decomposition]{Hahn-Jordan decomposition}, there exists a sequence $\{D_n\}$ in $\Ss$ s.t.
    \begin{equation*}
        \forall\ A \in \Ss,\ \nu_s(A \cap D_n) \geq \frac{1}{n} \mu(A \cap D_n),\ \nu_s(A \cap D_n^c) \leq \frac{1}{n} \mu(A \cap D_n^c).
    \end{equation*}
    Take $D = \cupp n \infty D_n$, we have
    \begin{equation*}
        \nu_s(D^c) \leq \nu_s(D_n^c) \leq \frac{1}{n} \mu(D_n^c) \leq \frac{1}{n} \mu(S),\ \forall\ n.
    \end{equation*}
    Take $n \to \infty$, this implies $\nu_s(D^c) = 0$. The last thing to prove is that \underline{$\mu(D) = 0$} so that $\mu \perp \nu_s$.
    
    \np Take $f_n = f + \frac{1}{n} \1_{D_n}$, and have
    \begin{equation*}
        \int_A f_n \dr \mu = \nu_a(A) + \frac1n\mu(D_n \cap A) \leq \nu_a(A) + \nu_s (D \cap A) \leq \nu(A).
    \end{equation*}
    This gives us $f_n \in \Rs \Rightarrow \Leftarrow f_n > f$. Therefore, 
    \begin{equation*}
        f_n = f\ \mu-a.e \Rightarrow \mu(D_n) = 0 \Rightarrow \mu(D) = 0.
    \end{equation*}
\end{enumerate}
\begin{remark}\ \\
The extension from finite measure to $\sigma$-finite measure is easy.
\end{remark}
\end{proof}


\begin{remark}\ \\
\hyperref[R-N thm]{Radon-Nikodym Theorem} follows from the above theorems.
\end{remark}



\clearpage
\subsection{Fubini's Theorem}
\subsubsection{Kernels and Product Spaces}

\begin{definition}\ \\
Suppose $(E,\Es),\ (F,\Fs)$ are two measurable spaces, 
\begin{equation*}
    K: E \times \Fs \to \R_+
\end{equation*}
is called a \textit{transition kernel} (from $(E,\Es)$ to $(F,\Fs)$) if 
\begin{enumerate}[label = (\arabic*)]
    \item $x \to K(x, B)$ is measurable, $\forall\ B \in \Fs$.
    \item $B \to K(x, B)$ is a measure on $(F,\Fs)$, $\forall\ x \in E$.
\end{enumerate}
\end{definition}

\vspace{6pt}
\begin{proposition}\ \\
$K$ is a transition kernel, then 
\begin{enumerate}[label = (\arabic*)]
    \item $K f(x) := \int_F K(x, \dr y) f(y),\ \forall\ x \in E$ belongs to $\Ls_0^+(\Es)$, $\forall\ f \in \Ls_0^+ (\Fs)$.
    \item $\mu K(B) := \int_E \mu(\dr x) K(x, B)$ defines a measure on $(F,\Fs)$.
    \item $(\mu K)(f) = \mu(Kf) = \int_E \mu(\dr x) \int_F K(x \dr y) f(y)$.
\end{enumerate}
\end{proposition}
\begin{proof}\ 
\begin{enumerate}[label = (\arabic*)]
    \item Suppose $f = \summ{i=1}{n} a_i \1_{B_i}$, then
    \begin{equation*}
        Kf(x) = \summ{i = 1}{n} a_i K(x, B_i)
    \end{equation*}
    is measurable. For $f \in \Ls_0^+$, take $(f_n) \subset \Ls_{\text{simple}}^+ (\Fs)$ s.t. $f_n \uparrow f$. We have
    \begin{equation*}
        Kf(x) = \lim_{n \to \infty} Kf_n(x)
    \end{equation*}
    by using MCT for $B \to K(x,B)$, and we have $Kf \in \Ls_0^+$ since it is the limit of the sequence.
    \item (2 \& 3)\\
    Take $L(f) = \mu(Kf),\ f,g \in \Ls_0^+,\ a,b \in \R_+$, we have
    \begin{enumerate}[label = (\alph*)]
        \item $L(0) = 0$.
        \item $L(af + bg) = \mu(K(af + bg)) = a \mu K f + b \mu K g$ (Linearity).
        \item $(f_n) \subset \Ls_0^+$, $f_n \uparrow f$, and thus
        \begin{equation*}
            Lf_n \uparrow Lf
        \end{equation*}
        by using MCT w.r.t $B \to K(x,B)$.
    \end{enumerate}
    Then by \hyperref[Daniell's Theorem]{Daniell's Theorem}, there exists unique measure $\nu$ on $(F,\Fs)$ s.t.
        \begin{equation*}
            Lf = \nu f,\ \nu(B) = L(\1_B) = \mu(K(x,B)) = \mu K(B) 
        \end{equation*}
    The above prove that $\mu K$ is a measure, and
  \begin{equation*}
      \mu(Kf) = (\mu K) f.
  \end{equation*}
\end{enumerate}
\end{proof}


\vspace{6pt}
\begin{definition}\ \\
Let $K$ be a transition kernal from $(E,\Es)$ to $(F,\Fs)$, then
\begin{itemize}
    \item $K$ is finite provided $K(x,F) < \infty,\ \forall\ x \in E$.
    \item $K$ is $\sigma$-finite provided $B \to K(x,B)$ is $\sigma$-finite.
    \item $K$ is bounded provided $x \to K(x,F)$ is bounded.
    \item $K$ is $\sigma$-bounded provided there exists partition $(F_n)$ of $F$ s.t. $x \to K(x, F_n)$ is bounded.
    \item $K$ is $\Sigma$-finite provided $K = \sum_{n=1}^{\infty} K_n$, where $K_n$ is finite.
    \item $K$ is called the \textit{transition probability} provided $K(x,F) = 1$.
\end{itemize}
\end{definition}

\vspace{6pt}
\begin{lemma}\ \\
Suppose $f \in \Ls(\Es \bigotimes \Fs)$, then 
\begin{equation*}
    f^y: x \to f(x,y) \in \Ls_0(\Es)\ \&\ f_x: y \to f(x,y) \in \Ls_0(\Fs).
\end{equation*}
\end{lemma}

\vspace{6pt}
\begin{proposition}\ \\
Suppose $f \in \Ls_0^+(\Es \bigotimes \Fs)$, let $K$ be a $\Sigma$-finite transition kernel from $(E,\Es)$ to $(F,\Fs)$, we have
\begin{equation*}
    Tf(x) := \int_F K(x,\dr y) f(x,y) \in \Ls_0^+(\Es).
\end{equation*}
Moreover,
\begin{enumerate}[label = (\alph*)]
    \item $T(af + bg) = a Tf + b Tg,\ f,g \in \Ls_0^+,\ a,b \in \R$. (Linearity)
    \item $Tf_n \uparrow Tf$ for $(f_n) \subset \Ls_0^+(\Es \bigotimes \Fs)$ s.t. $f_n \uparrow f$. (Continuity under increasing limits)
    \end{enumerate}
\end{proposition}
\begin{proof}\ \\

WLOG assume $K$ is bounded, and it is not hard to generalize boundedness to $\Sigma$-finiteness (First use $\1_{x: K(x,F) < N}$ and MCT to approximate finite $K$, and then use summation and MCT again for $\Sigma$-finite $K$). 

\np By the assumption of boundedness, for each $x \in E$, $K(x, B)$ is a finite measure on $(F,\Fs)$. Also by previous lemma, we know $f_x \in \Ls_0(\Fs),\ \forall\ x \in E$. Therefore, $Tf(x)$ is well-defined, and equivalent to the integral of measurable function $f_x$ w.r.t. a finite measure $K(x,B)$ on $(F,\Fs)$.

\np Linearity and Continuity under increasing limits are trivial following definition and MCT. It remains to show the measurability. Define
\begin{equation*}
    \Ms = \{f \in \Ls_0(\Es \bigotimes \Fs):\ Tf \in \Ls_0^+(\Es)\},
\end{equation*}
\begin{itemize}
    \item The identity function $I_d \in \Ms$, since $T I_d = K(x,F), \forall\ x \in E$ is finite and $\Es$-measurable.
    \item For $a,b \in \R,\ f,g \in \Ms_b$, we have
    \begin{align*}
        T(af + bg)(x) &= \int_F K(x,\dr y) (af + bg)(x,y)\\
        &= a\int_F K(x,\dr y) f(x,y) + b  \int_F K(x,\dr y) g(x,y)\\
        &= a Tf(x) + b Tg(x).
    \end{align*}
    \item For $(f_n) \subset \Ms_+$ s.t. $f_n \uparrow f$, we have
    \begin{align*}
        \lim_n Tf_n(x) &= \lim_n \int_F K(x,\dr y) f_n(x,y) = \int_F K(x,\dr y) f(x,y) = Tf(x)
    \end{align*}
    by applying MCT w.r.t measure $B \to K(x,B)$.
\end{itemize}
Therefore, $\Ms$ is a \textit{Monotone class}. For $A \in \Es,\ B \in \Fs$,
\begin{equation*}
    T \1_{A \times B} = \1_A (x) K(x, B) \in \Ls_0^+(\Es),
\end{equation*}
Therefore, by \hyperref[1.17]{Theorem 1.17}, $\Ls_0^+(\Es \bigotimes \Fs) \subset \Ms$. Completes the proof.
\end{proof}



\vspace{6pt}
\begin{proposition}\ \\
Let $(E,\Es,\mu)$ be a measure space, and $K$ a $\Sigma$-finite transition kernel from $(E,\Es)$ to $(F,\Fs)$. For $f \in \Ls_0^+(\Es \bigotimes \Fs)$, then
\begin{equation*}
    \pi f := \int_E \mu(dx) \int_F K(x,dy) f(x,y)
\end{equation*}
defines a measure on $(E\times F, \Es \bigotimes \Fs )$.\\
Moreover, if $\mu$ is $\sigma$-finite and $K$ is $\sigma$-bounded, then $\pi$ is $\sigma$-finite. In fact, $\pi$ is also the unique measure on $(E \times F, \Es \bigotimes \Fs)$ satisfying $\pi(A \times B) = \int_A K(x,B) \mu(\dr x),\ \forall\ A \in \Es,\ B \in \Fs$.
\end{proposition}
\begin{proof}\ \\
Define $L(f) = \mu(Tf)$, then we have
\begin{itemize}
    \item $L(0) = 0$.
    \item $L$ is linear, $T$ is linear and integration (w.r.t $\mu$) is linear.
    \item $L$ is continuous under increasing, since $T$ has the property and by MCT w.r.t $\mu$.
\end{itemize}
By \hyperref[Daniell's theorem]{Daniell's Theorem}, $\exists$ unique measure $\pi'$ s.t.
\begin{align*}
    \pi' f &= L(f),\\
    \pi(\1_{A \times B}) &= \mu(T \1_{A \times B})\\
    &= \mu(\1_A K(\cdot, B))\\
    &= \int_A \mu(\dr x) K(x,B)\\
    &= \pi'(A \times B)
\end{align*}
\begin{remark}[uniqueness]\ \\
If $\mu$ and $\nu$ agree on $\Cs$ s.t. $\sigma(\Cs) = \Es$, and $\Cs$ contains a measurable partition $(E_n) \uparrow E$, we have $\mu(E_n) = \nu(E_n) < \infty$ \imply $\mu = \nu$. Recall \hyperref[1.23]{Theorem 1.23}. If $(E_n), (F_n)$ are measurable partitions of $E,F$ s.t. $\mu(E_n) < \infty,\ K(x,F_n) < \infty$, then $(E_n \times F_n)$ is a measurable partition of $E \times F$. therefore, $\mu =\nu$ on every countable finite partition of $E \times F$. In other cases $\mu = \nu = \infty$ also matches.
\end{remark}
\end{proof}



\vspace{12pt}
\subsubsection{Fubini's Theorem}
\begin{theorem}[Fubini's Theorem]\ \\
Suppose $\mu\ \&\ \nu$ are $\Sigma$-finite measures on $(E,\Es)\ \&\ (F,\Fs)$, respectively.
\begin{enumerate}[label = (\arabic*)]
    \item $\exists$ unique $\Sigma$-finite measure $\pi$ on $(E \times F, \Es \bigotimes \Fs)$ s.t. for $f \in \Ls_0^+(\Es \bigotimes \Fs)$,
    \begin{equation*}
        \pi f := \int_E \mu(dx) \int_F \nu(dy) f(x,y) = \int_F \nu(dy) \int_E \mu(dx) f(x,y).
    \end{equation*}
    \item If $f$ is $\pi$ integrable, the above equation still holds. Moreover, we have
    $f_x \in \Ls_1(\Fs)$ for $\mu$-a.e. $x$ and $f^y \in \Ls_1(\Es)$ for $\nu$-a.e. $y$.
\end{enumerate}
\end{theorem}
\begin{proof}\ \\
By the previous result, $\pi$ defines a measure on $(E\times F)$. Suppose $\mu = \sum \mu_i,\ \nu = \sum \nu_i$ ($\Sigma$-finite partition), we have
\begin{equation*}
    \pi f = \sum_{i} \sum_{j} \int_E \mu_i(dx) \int_F \nu_i(dy) f(x,y) = \sum_{ij} (\mu_i \times \nu_j) f,
\end{equation*}
and thus $\pi$ is $\Sigma$-finite. Take $\hat{f}(y,x) = f(x,y)$, we have
\begin{align*}
    \int_F \nu(dy) \int_E \mu(dx) f(x,y) 
    &= \int_F \nu(dy) \int_E \mu(dx) \hat{f}(y,x)\\
    &= \hat{\pi} \hat{f}\\
    &= \sum_{ij} (\nu_i \times \mu_j) \hat{f}.
\end{align*}
It suffices to show $\pi f = \hat{\pi} \hat{f}$ for finite measure $\pi$.\\
WTS $h: (x,y) \to (y,x)$ is measurable w.r.t $(\Es \bigotimes \Fs)\ \&\ (\Fs \bigotimes \Es)$. For $A \in \Es,\ B \in \Fs$, we have
\begin{equation*}
    \pi \circ h^{-1} (B \times A) = \pi(A \times B) = \mu(A) \nu(B) = \hat{\pi} (B \times A),
\end{equation*}
which implies
\begin{equation*}
    \hat{\pi} = \pi \circ h^{-1}.
\end{equation*}
Therefore,
\begin{equation*}
    \hat{\pi} \hat{f} = (\pi \circ h^{-1}) \hat{f} = \pi(\hat{f} \circ h^{-1}) = \pi f.
\end{equation*}
The remaining part is easy by taking $\pi f = \pi f^+ - \pi f^-$. In addition, note $\pi$-integral implies
\begin{align*}
    \int_F  \nu(\dr y) f_x(y) &= \int_F \nu(\dr y) f(x,y) < \infty \text{ for } \mu\text{-a.e.}\ x \\
    \int_E  \mu(\dr y) f^y(x) &= \int_E \mu(\dr x) f(x,y) < \infty \text{ for } \nu\text{-a.e.}\ y 
\end{align*}
Therefore, we complete the proof for (b).
\end{proof}


\clearpage
\begin{example}[$\Sigma$-finite can't be dropped]\ \\
Let $E = F = [0,1]$, $\Bs$ Borel $\sigma$-algebra, and define $\mu = \text{ Lebesgue measure },\ \nu = \text{ counting measure }$. Note that $\nu$ is note $\Sigma$-finite. Consider
\begin{equation*}
    f(x,y) = \left\{\begin{matrix}
1 & x = y\\ 
0 & x \neq y
\end{matrix}\right.,
\end{equation*}
then we have
\begin{align*}
    \int \mu(dx) \int \nu(dy) f(x,y) &= 1,\\
    \int \nu(dy) \int \mu(dx) f(x,y) &= 0,
\end{align*}
for which the Fubini's Theorem does not hold. 
\end{example}

\vspace{6pt}
\begin{example}[Integrability assumption can't be dropped]\ \\
    Consider three lines in $\R^2$ plane, $y_1 = x,\ y_2 = x - 1,\ y_3 = x - 2$, and we define 
    \begin{align*}
        R &= \{(x,y):\ y \geq 0, y_2 \leq y \leq y_1 \}\\
        S &= \{(x,y):\ y \geq 0, y_3 \leq y \leq y_2 \}
    \end{align*}
    Take $f = \1_S - \1_R$, which is not integrable w.r.t. the Lebesgue measure on $\R^2$. We have
    \begin{equation*}
        g(x) = \int_0^\infty f(x,y) d y = \left\{\begin{matrix}
-x & 0 \leq x \leq 1 \\ 
x - 2 & 1 \leq x \leq 2\\ 
0 & x > 2
\end{matrix}\right..
    \end{equation*}
    Note that
    \begin{align*}
        \int_0^\infty g(x) dx = -1.
    \end{align*}
    Also, we have
    \begin{align*}
        h(y) = \int_0^\infty f(x,y) dx = 0\\
        \int h(y) dy = 0.
    \end{align*}
    We can see Fubini's Theorem does not hold.
\end{example}














